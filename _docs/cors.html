<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.361">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Python tool library to download collections of NOAA NGS RINEX datafiles from the CORS site.">

<title>CORS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
<meta property="og:title" content="CORS">
<meta property="og:description" content="Python tool library to download collections of NOAA NGS RINEX datafiles from the CORS site.">
<meta property="og:site-name" content="CORS">
<meta name="twitter:title" content="CORS">
<meta name="twitter:description" content="Python tool library to download collections of NOAA NGS RINEX datafiles from the CORS site.">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">CORS</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./cors.html">CORS</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">CORS</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cors.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">CORS</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#code" id="toc-code" class="nav-link active" data-scroll-target="#code">Code</a>
  <ul class="collapse">
  <li><a href="#module-globals" id="toc-module-globals" class="nav-link" data-scroll-target="#module-globals">Module Globals</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">Functions</a>
  <ul class="collapse">
  <li><a href="#install_teqc" id="toc-install_teqc" class="nav-link" data-scroll-target="#install_teqc">install_teqc</a></li>
  <li><a href="#extract_year" id="toc-extract_year" class="nav-link" data-scroll-target="#extract_year">extract_year</a></li>
  <li><a href="#istimeformat" id="toc-istimeformat" class="nav-link" data-scroll-target="#istimeformat">isTimeFormat</a></li>
  <li><a href="#utctoweekseconds" id="toc-utctoweekseconds" class="nav-link" data-scroll-target="#utctoweekseconds">utctoweekseconds</a></li>
  <li><a href="#compute_day_of_year" id="toc-compute_day_of_year" class="nav-link" data-scroll-target="#compute_day_of_year">compute_day_of_year</a></li>
  <li><a href="#gethtmldocument" id="toc-gethtmldocument" class="nav-link" data-scroll-target="#gethtmldocument">getHTMLdocument</a></li>
  <li><a href="#cors_get_support_url_list" id="toc-cors_get_support_url_list" class="nav-link" data-scroll-target="#cors_get_support_url_list">CORS_get_Support_url_list</a></li>
  <li><a href="#download_urls" id="toc-download_urls" class="nav-link" data-scroll-target="#download_urls">download_urls</a></li>
  <li><a href="#cors_trim_to_time" id="toc-cors_trim_to_time" class="nav-link" data-scroll-target="#cors_trim_to_time">CORS_trim_to_time</a></li>
  <li><a href="#cors_get_station_log_url" id="toc-cors_get_station_log_url" class="nav-link" data-scroll-target="#cors_get_station_log_url">CORS_get_station_log_url</a></li>
  <li><a href="#down_load_cors_station_log" id="toc-down_load_cors_station_log" class="nav-link" data-scroll-target="#down_load_cors_station_log">down_load_cors_station_log</a></li>
  <li><a href="#cors_get_station_plots_url" id="toc-cors_get_station_plots_url" class="nav-link" data-scroll-target="#cors_get_station_plots_url">CORS_get_station_plots_url</a></li>
  <li><a href="#down_load_cors_plots" id="toc-down_load_cors_plots" class="nav-link" data-scroll-target="#down_load_cors_plots">down_load_cors_plots</a></li>
  <li><a href="#cors_get_station_coords_url" id="toc-cors_get_station_coords_url" class="nav-link" data-scroll-target="#cors_get_station_coords_url">CORS_get_station_coords_url</a></li>
  <li><a href="#down_load_cors_station_coords" id="toc-down_load_cors_station_coords" class="nav-link" data-scroll-target="#down_load_cors_station_coords">down_load_cors_station_coords</a></li>
  <li><a href="#clean_up_cors" id="toc-clean_up_cors" class="nav-link" data-scroll-target="#clean_up_cors">clean_up_CORS</a></li>
  <li><a href="#down_load_list_of_obs_files" id="toc-down_load_list_of_obs_files" class="nav-link" data-scroll-target="#down_load_list_of_obs_files">down_load_list_of_obs_files</a></li>
  <li><a href="#down_load_cors_data" id="toc-down_load_cors_data" class="nav-link" data-scroll-target="#down_load_cors_data">down_load_cors_data</a></li>
  </ul></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/lidar532/CORS/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">CORS</h1>
</div>

<div>
  <div class="description">
    Python tool library to download collections of NOAA NGS RINEX datafiles from the CORS site.
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<section id="code" class="level1">
<h1>Code</h1>
<section id="module-globals" class="level2">
<h2 class="anchored" data-anchor-id="module-globals">Module Globals</h2>
<p><code>CORS_Lib_asof</code> is the date CORS library was compiled.</p>
<p><code>IN_COLAB</code> will be <code>True</code> if you are running in Google COlab and set to <code>False</code> otherwise.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>CORS_Lib_asof      <span class="op">=</span> <span class="st">'CORS_Lib_asof: 2023-0614-1908'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The following module global variables hold the urls to the various parts of the NOAA CORS website.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>base_url           <span class="op">=</span> <span class="st">'https://geodesy.noaa.gov/'</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>rinex_url          <span class="op">=</span> base_url<span class="op">+</span><span class="st">'corsdata/rinex/'</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>coords_url         <span class="op">=</span> base_url<span class="op">+</span><span class="st">'corsdata/coord/coord_14/'</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>plots_url          <span class="op">=</span> base_url<span class="op">+</span><span class="st">'corsdata/Plots/'</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>station_log_url    <span class="op">=</span> base_url<span class="op">+</span><span class="st">'corsdata/station_log/'</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>cors_info_url_list <span class="op">=</span> [ base_url<span class="op">+</span><span class="st">'/corsdata/readme.txt'</span>, </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>                      base_url<span class="op">+</span><span class="st">'/corsdata/RINEX211.txt'</span> ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>test_folder</code> is the default folder where downloaded CORS data will be stored during testing of this package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>test_folder <span class="op">=</span> <span class="st">'/tmp/test/'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>wget_return_codes</code> are the code numbers and decoded descriptions returned by the <a href="https://www.gnu.org/software/wget/">wget</a> program. wget is used by this package to download the datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>wget_return_codes <span class="op">=</span> (<span class="st">'0, No problems occurred.'</span>, </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'1, Generic error code.'</span>,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'2, Parse error---for instance, when parsing command-line options, the .wgetrc or .netrc...'</span>,</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'3, File I/O error.'</span>,</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'4, Network failure.'</span>,</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'5, SSL verification failure.'</span>,</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'6, Username/password authentication failure.'</span>,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'7, Protocol errors.'</span>,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>                     <span class="st">'8, Server issued an error response.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://www.unavco.org/software/data-processing/teqc/teqc.html"><code>Teqc</code></a> is used to slice RINEX files by time. The url list below are the full list of UNAVCO download sites for <code>teqc</code>. The <code>install_teqc</code> function will download try each one and check that it works.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>teqc_list          <span class="op">=</span> [ </span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://www.unavco.org/software/data-processing/teqc/development/teqc_CentOSLx86_64s.zip'</span>,</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://www.unavco.org/software/data-processing/teqc/development/teqc_CentOSLx86_64d.zip'</span>,</span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://www.unavco.org/software/data-processing/teqc/development/teqc_Lx86_64d.zip'</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'https://www.unavco.org/software/data-processing/teqc/development/teqc_Lx86_64s.zip'</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If running on Google Colab, the default path to store binary programs such as teqc is set below. If not running in Colab, binarys will be stored in <code>~/bin</code> in the users home directory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'     IN_COLAB: </span><span class="sc">{</span>IN_COLAB<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'    local_bin: </span><span class="sc">{</span>local_bin<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'CORS_Lib_asof: </span><span class="sc">{</span>CORS_Lib_asof<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'     base_url: </span><span class="sc">{</span>base_url<span class="sc">}</span><span class="ss">'</span>)</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'    rinex_url: </span><span class="sc">{</span>rinex_url<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     IN_COLAB: False
    local_bin: /home/wright/bin/
CORS_Lib_asof: CORS_Lib_asof: 2023-0614-1908
     base_url: https://geodesy.noaa.gov/
    rinex_url: https://geodesy.noaa.gov/corsdata/rinex/</code></pre>
</div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">Functions</h2>
<hr>
<section id="install_teqc" class="level3">
<h3 class="anchored" data-anchor-id="install_teqc">install_teqc</h3>
<blockquote class="blockquote">
<pre><code> install_teqc ()</code></pre>
</blockquote>
<p>This function is used to download and install the teqc software from Unavco. It first checks if the teqc software is already installed in the system. If not, it downloads the teqc_Lx86_64s.zip file from Unavco, unzips it, creates a local bin directory and moves the teqc file to the local bin directory. Finally, it deletes the zip file.</p>
<p>See: https://www.unavco.org/software/data-processing/teqc/teqc.html</p>
<p>Parameters: None</p>
<p>Returns: A string indicating the state of the installation. It can be either: ‘Teqc installed.’, ‘Teqc was already installed.’, or ‘teqc install failed.’</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>test_teqc_state <span class="op">=</span> install_teqc()</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(test_teqc_state)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> which teqc</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="op">!</span> teqc <span class="op">-</span>version</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>install_teqc(): 
Teqc was already installed.
/home/wright/bin/teqc
executable:  teqc
version:     teqc  2019Feb25
build:       Linux 2.6.32-573.12.1.x86_64|x86_64|gcc|Linux 64|=+</code></pre>
</div>
</div>
<hr>
</section>
<section id="extract_year" class="level3">
<h3 class="anchored" data-anchor-id="extract_year">extract_year</h3>
<blockquote class="blockquote">
<pre><code> extract_year (date:str)</code></pre>
</blockquote>
<p>Extract the year from a date string in the form: <code>"2023/1/1"</code></p>
<p>Here is an example.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>extract_year( <span class="st">'2023/1/20'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>'2023'</code></pre>
</div>
</div>
<hr>
</section>
<section id="istimeformat" class="level3">
<h3 class="anchored" data-anchor-id="istimeformat">isTimeFormat</h3>
<blockquote class="blockquote">
<pre><code> isTimeFormat (ts:str)</code></pre>
</blockquote>
<p>isTimeFormat(ts) checks the ‘ts’ input string for validity. A valid string is in this format: ‘13:34:56’.</p>
<p>Returns True for a valid string,a nd False for invalid.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>ts</td>
<td>str</td>
<td>Time string as: HH:MM:SS</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>bool</strong></td>
<td><strong>True if valid HH:MM:SS time string.</strong></td>
</tr>
</tbody>
</table>
<p>Below we test the <code>isTimeFormat()</code> with several input times.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'          Returned</span><span class="ch">\n</span><span class="st">'</span>\</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>      <span class="st">'Time      Value (rv)</span><span class="ch">\n</span><span class="st">'</span>\</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>      <span class="st">'--------------------'</span>)</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> t <span class="kw">in</span> [<span class="st">'12:34:56'</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>          <span class="st">'12:34'</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>          <span class="st">'01:02:03'</span>,</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>          <span class="st">'23:01:02'</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>          <span class="st">'25:34:63'</span>]:</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  rv <span class="op">=</span> isTimeFormat(t)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>t<span class="sc">:9}</span><span class="ss"> rv:</span><span class="sc">{</span>rv<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          Returned
Time      Value (rv)
--------------------
12:34:56  rv:True
12:34     rv:False
01:02:03  rv:True
23:01:02  rv:True
25:34:63  rv:False</code></pre>
</div>
</div>
<hr>
</section>
<section id="utctoweekseconds" class="level3">
<h3 class="anchored" data-anchor-id="utctoweekseconds">utctoweekseconds</h3>
<blockquote class="blockquote">
<pre><code> utctoweekseconds (utc, leapseconds)</code></pre>
</blockquote>
<p>This function takes two parameters, utc and leapseconds, and returns the GPS week, the GPS day, and the seconds and microseconds since the beginning of the GPS week.</p>
<p>Parameters: utc (datetime.datetime): The UTC time to be converted. leapseconds (int): The number of leap seconds to be added to the UTC time. See: <a href="https://shorturl.at/jozO3">GPS Leap Seconds</a> for more information.</p>
<p>Returns: A tuple containing the GPS week, the GPS day, and the seconds and microseconds since the beginning of the GPS week.</p>
<p>The GPS week is an integer representing the number of weeks since the beginning of the GPS epoch (1980-01-06 00:00:00). The GPS day is an integer representing the number of days since the beginning of the GPS week. The seconds and microseconds since the beginning of the GPS week are both integers representing the number of seconds and microseconds since the beginning of the GPS week.</p>
<p>Example: utc = datetime.datetime(2020, 1, 1, 0, 0, 0) leapseconds = 18</p>
<p>utctoweekseconds(utc, leapseconds)</p>
<p>Returns: (2086, 0, 0, 0)</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>utc</td>
<td></td>
<td>Date string ‘YYYY/MM/DD’</td>
</tr>
<tr class="even">
<td>leapseconds</td>
<td></td>
<td>For 2023, use -18</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>tuple</strong></td>
<td><strong>(GPS_Week, GPS_day, Seconds_since_midnight)</strong></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="compute_day_of_year" class="level3">
<h3 class="anchored" data-anchor-id="compute_day_of_year">compute_day_of_year</h3>
<blockquote class="blockquote">
<pre><code> compute_day_of_year (date_str:str)</code></pre>
</blockquote>
<p>This function computes the day of the year from a given date string in the format ‘YYYY/MM/DD’.</p>
<p>Parameters: date_str (str): A string representing a date in the format ‘YYYY/MM/DD’.</p>
<p>Returns: A tuple containing the date in the following formats: ( YYYY/jjj, YYYY-MMDD-Jjjj, YYYY, jjj, DoW)’, where <code>YYYY</code> is the year, <code>jjj</code>: Juliean Day, <code>DoY</code> is the Day of the week.</p>
<p>Each tuple element has a particular purpose. The first element <code>YYYY/jjj</code> represents the portion of the path used on the CORS web site. The second element, <code>YYYY-MMDD-Jjjj</code> is used to generate the path to store downloaded data. The <code>YYYY</code> is simply the year, and <code>jjj</code> is simple the Julean day of the year, and <code>DoW</code> is the day of the week. Each element is type str.</p>
<p>Example: compute_day_of_year(‘2020/04/15’)</p>
<p>Returns: (‘2020/105’, ‘2020-0415-J105’, ‘2020’, ‘105’, ‘04’, ‘15’)</p>
<p>The returned tuple contains the day of the year in the format ‘YYYY/DDD’, the year as a string, the day as a string, the month as a string, and the day as a string. The first element of the tuple is the day of the year in the format ‘YYYY/DDD’, which is the year followed by the day of the year. The second element of the tuple is the year as a string. The third element of the tuple is the day as a string. The fourth element of the tuple is the month as a string. The fifth element of the tuple is the day of the week as a string.</p>
<p>The CORS path segment refers to the portion of the url that represents the date of the date.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>date_str</td>
<td>str</td>
<td>Date as ‘YYYY/MM/DD’</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>tuple</strong></td>
<td></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>test_dates <span class="op">=</span> [</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2023/1/1'</span>,</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2023/01/01'</span>,</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2023/12/31'</span>,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">'2023/05/20'</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>]</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'All returned data:'</span>)</span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Input Date     ( YYYY/jjj,   YYYY-MMDD-Jjjj,   YYYY,   jjj,        DoW)'</span>)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'-----------------------------------------------------------------------'</span>)</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> d <span class="kw">in</span> test_dates:</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>( <span class="ss">f'</span><span class="sc">{</span>d<span class="sc">:12}</span><span class="ss"> : </span><span class="sc">{</span> compute_day_of_year(d) <span class="sc">}</span><span class="ss"> '</span>)</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">Date           CORS path</span><span class="ch">\n</span><span class="st">'</span>\</span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>       <span class="st">'               segment only:'</span>)</span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> d <span class="kw">in</span> test_dates:</span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>( <span class="ss">f'</span><span class="sc">{</span>d<span class="sc">:12}</span><span class="ss"> : </span><span class="sc">{</span> compute_day_of_year(d)[<span class="dv">0</span>]<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>All returned data:
Input Date     ( YYYY/jjj,   YYYY-MMDD-Jjjj,   YYYY,   jjj,        DoW)
-----------------------------------------------------------------------
2023/1/1     : ('2023/001', '2023-0101-J001', '2023', '001', '01', '01') 
2023/01/01   : ('2023/001', '2023-0101-J001', '2023', '001', '01', '01') 
2023/12/31   : ('2023/365', '2023-1231-J365', '2023', '365', '12', '31') 
2023/05/20   : ('2023/140', '2023-0520-J140', '2023', '140', '05', '20') 

Date           CORS path
               segment only:
2023/1/1     : 2023/001
2023/01/01   : 2023/001
2023/12/31   : 2023/365
2023/05/20   : 2023/140</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>test_eq(<span class="dv">1</span>,<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="gethtmldocument" class="level3">
<h3 class="anchored" data-anchor-id="gethtmldocument">getHTMLdocument</h3>
<blockquote class="blockquote">
<pre><code> getHTMLdocument (url)</code></pre>
</blockquote>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>url</td>
<td></td>
<td>The <code>url</code> to get.</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>str</strong></td>
<td><strong>the contents of the url as a string.</strong></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test  getHTMLdocument(rinex_url)</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>test_html <span class="op">=</span> getHTMLdocument(rinex_url)</span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> line <span class="kw">in</span> test_html.splitlines():</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(line)<span class="op">;</span> i <span class="op">+=</span> <span class="dv">1</span></span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> i <span class="op">==</span> <span class="dv">10</span>:</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">break</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN"&gt;
&lt;html&gt;
 &lt;head&gt;
  &lt;title&gt;Index of /corsdata/rinex&lt;/title&gt;
 &lt;/head&gt;
 &lt;body&gt;
&lt;h1&gt;Index of /corsdata/rinex&lt;/h1&gt;
  &lt;table&gt;
   &lt;tr&gt;&lt;th valign="top"&gt;&lt;img src="/icons/blank.gif" alt="[ICO]"&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=N;O=D"&gt;Name&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=M;O=A"&gt;Last modified&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=S;O=A"&gt;Size&lt;/a&gt;&lt;/th&gt;&lt;th&gt;&lt;a href="?C=D;O=A"&gt;Description&lt;/a&gt;&lt;/th&gt;&lt;/tr&gt;
   &lt;tr&gt;&lt;th colspan="5"&gt;&lt;hr&gt;&lt;/th&gt;&lt;/tr&gt;</code></pre>
</div>
</div>
<hr>
</section>
<section id="cors_get_support_url_list" class="level3">
<h3 class="anchored" data-anchor-id="cors_get_support_url_list">CORS_get_Support_url_list</h3>
<blockquote class="blockquote">
<pre><code> CORS_get_Support_url_list (base_url:str, date:str,
                            file_types:str='sp3.gz|n.gz|g.gz')</code></pre>
</blockquote>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>base_url</td>
<td>str</td>
<td></td>
<td>COR url.</td>
</tr>
<tr class="even">
<td>date</td>
<td>str</td>
<td></td>
<td>Date. Format: ‘YYYY:MM:DD’</td>
</tr>
<tr class="odd">
<td>file_types</td>
<td>str</td>
<td>sp3.gz|n.gz|g.gz</td>
<td>file types to get.</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td></td>
<td><strong>A list of CORS nav and SP3 files.</strong></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Testing: CORS_get_Support_url_list()'</span>)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'sp3.gz and n.gz and g.gz'</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>url <span class="op">=</span> rinex_url</span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>sp3_and_nav_urls <span class="op">=</span> CORS_get_Support_url_list(url, date<span class="op">=</span><span class="st">'2023/05/23'</span>)</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> fn <span class="kw">in</span> sp3_and_nav_urls:</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(fn)</span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">sp3 only.'</span>)</span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>file_types<span class="op">=</span><span class="st">"sp3.gz"</span></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>sp3_urls <span class="op">=</span> CORS_get_Support_url_list(url, date<span class="op">=</span><span class="st">'2023/05/23'</span>, file_types<span class="op">=</span><span class="st">"sp3.gz"</span>)</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> fn <span class="kw">in</span> sp3_urls:</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(fn)</span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'</span><span class="ch">\n</span><span class="st">n.gz and g.gz only.'</span>)</span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>file_types<span class="op">=</span><span class="st">"sp3.gz"</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a>nav_urls <span class="op">=</span> CORS_get_Support_url_list(url, date<span class="op">=</span><span class="st">'2023/05/23'</span>, file_types<span class="op">=</span><span class="st">"n.gz|g.gz"</span>)</span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> fn <span class="kw">in</span> nav_urls:</span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(fn)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Testing: CORS_get_Support_url_list()
sp3.gz and n.gz and g.gz</code></pre>
</div>
</div>
<hr>
</section>
<section id="download_urls" class="level3">
<h3 class="anchored" data-anchor-id="download_urls">download_urls</h3>
<blockquote class="blockquote">
<pre><code> download_urls (url_list, folder, clobber=False, id='', options='',
                cut_dirs=4)</code></pre>
</blockquote>
<p>download_urls() is a function that downloads a list of URLs to a specified root directory.</p>
<p>Parameters: url_list (list): A list of URLs to be downloaded. root_dir (str): The root directory to which the URLs will be downloaded. clobber (bool): A boolean value indicating whether existing files should be overwritten. id (str): An optional identifier for the download. options (str): An optional string of additional wget options.</p>
<pre><code>The function uses the wget command to download the URLs. The wget options used are:
-nv: Not verbose
-nc: No clobber (use for OSB files to avoid overwriting 1-Sec with 30-Sec)
-np: No parent. (Important)
-nH: Do not create a directory named after the url
--cut-dirs=4: Remove the first four subdirs
-R "index.html*": Do not keep the index.html* files.
-P xxx: xxx will be the root directory

Wget return codes:
  0   No problems occurred.
  1   Generic error code.
  2   Parse error---for instance, when parsing command-line options, the .wgetrc or .netrc...
  3   File I/O error.
  4   Network failure.
  5   SSL verification failure.
  6   Username/password authentication failure.
  7   Protocol errors.
  8   Server issued an error response.</code></pre>
<table class="table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>url_list</td>
<td></td>
<td></td>
<td>List of urls to download.</td>
</tr>
<tr class="even">
<td>folder</td>
<td></td>
<td></td>
<td>Folder to store the downloads.</td>
</tr>
<tr class="odd">
<td>clobber</td>
<td>bool</td>
<td>False</td>
<td>True to overwrite, False to not overwrite existing files.</td>
</tr>
<tr class="even">
<td>id</td>
<td>str</td>
<td></td>
<td>Optional <code>id</code> to use in the log file to identify the log.</td>
</tr>
<tr class="odd">
<td>options</td>
<td>str</td>
<td></td>
<td><code>wget</code> options.</td>
</tr>
<tr class="even">
<td>cut_dirs</td>
<td>int</td>
<td>4</td>
<td>Number of url subdirectories to trim.</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td></td>
<td><strong>a list of return status strings for each download.</strong></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Test with some sp3 and nav data.</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>test_url      <span class="op">=</span> rinex_url</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>fn <span class="op">=</span> <span class="ss">f'</span><span class="sc">{</span>test_folder<span class="sc">}</span><span class="ss">/sp3_nav'</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>date <span class="op">=</span> <span class="st">'2023/04/28'</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Testing: CORS_get_Support_url_list()'</span>)</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'Storing in folder: </span><span class="sc">{</span>fn<span class="sc">}</span><span class="ch">\n</span><span class="ss">'</span>\</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>      <span class="ss">f'             Date: </span><span class="sc">{</span>date<span class="sc">}</span><span class="ch">\n</span><span class="ss">'</span>)</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>test_url_list <span class="op">=</span> CORS_get_Support_url_list(test_url, date <span class="op">=</span> date)</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Urls downloaded'</span>)</span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> url <span class="kw">in</span> test_url_list:</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="bu">print</span>(url)</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> download_urls(test_url_list, folder<span class="op">=</span>fn, <span class="bu">id</span><span class="op">=</span><span class="st">'sp3'</span>)</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>rv_str <span class="op">=</span> wget_return_codes[rv.returncode]</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="ch">\n</span><span class="ss">Operation completed. The Wget response was: </span><span class="sc">{</span>rv_str<span class="sc">}</span><span class="ss">'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="cors_trim_to_time" class="level3">
<h3 class="anchored" data-anchor-id="cors_trim_to_time">CORS_trim_to_time</h3>
<blockquote class="blockquote">
<pre><code> CORS_trim_to_time (f:str, start:str, stop:str)</code></pre>
</blockquote>
<p>Trims a RINEX file (f) to be between the ‘start’ and ‘stop’ times given.</p>
<p>This function takes in a file name (f), start time (start) and stop time (stop) as parameters and trims the file to the given time range.</p>
<p>The start and stop times are first converted to a format without colons, hyphens and periods. The teqc command is then used to trim the file to the given time range and the output is stored in a temporary file. The temporary file is then moved to the original file name.</p>
<p>Parameters: f (str): The file name to be trimmed. start (str): The start time in the format ‘YYYY-MM-DD HH:MM:SS.SSS’. stop (str): The stop time in the format ‘YYYY-MM-DD HH:MM:SS.SSS’.</p>
<p>Returns: rv (CompletedProcess): A CompletedProcess object containing information about the run command.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>f</td>
<td>str</td>
<td>RINEX file Name</td>
</tr>
<tr class="even">
<td>start</td>
<td>str</td>
<td>Start time str as <code>'YYYY-MM-DD HH:MM:SS.SSS'</code></td>
</tr>
<tr class="odd">
<td>stop</td>
<td>str</td>
<td>Stop time str as <code>'YYYY-MM-DD HH:MM:SS.SSS'</code></td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="cors_get_station_log_url" class="level3">
<h3 class="anchored" data-anchor-id="cors_get_station_log_url">CORS_get_station_log_url</h3>
<blockquote class="blockquote">
<pre><code> CORS_get_station_log_url (station_list)</code></pre>
</blockquote>
<p>This function takes a list of station names as an argument and returns a list of URLs for the station log files.</p>
<p>Parameters: station_list (list): A list of station names.</p>
<p>Returns: lst (list): A list of URLs for the station log files.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>station_list</td>
<td></td>
<td>Python <code>list</code> of CORS Stations.</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td><strong>A list of station log file urls</strong></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>station_list  <span class="op">=</span> [<span class="st">'ncdu'</span>, <span class="st">'ncbe'</span>, <span class="st">'NCRT'</span>, <span class="st">'loy2'</span>]</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>local_test_folder <span class="op">=</span> test_folder</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> CORS_get_station_log_url( station_list )</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>display(rv)</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="down_load_cors_station_log" class="level3">
<h3 class="anchored" data-anchor-id="down_load_cors_station_log">down_load_cors_station_log</h3>
<blockquote class="blockquote">
<pre><code> down_load_cors_station_log (dir:str, station_list:list)</code></pre>
</blockquote>
<p>This function downloads the log files of the given CORS stations from the NGS website.</p>
<p>Parameters: dir (str): The directory where the log files should be downloaded. station_list (list): A list of CORS station names.</p>
<p>Returns: rv (dict): A dictionary containing the station name as the key and the path of the downloaded log file as the value.</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dir</td>
<td>str</td>
<td>Existing folder to place the file.</td>
</tr>
<tr class="even">
<td>station_list</td>
<td>list</td>
<td>Python <code>list</code> of CORS Stations.</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td><strong>a <code>dict</code> where <code>key</code> is the station ID, and <code>value</code> is path of the downloade file</strong></td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>station_list  <span class="op">=</span> [<span class="st">'ncdu'</span>, <span class="st">'ncbe'</span>, <span class="st">'NCRT'</span>, <span class="st">'loy2'</span>]</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>local_test_folder <span class="op">=</span> test_folder</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> down_load_cors_station_log( local_test_folder, station_list )</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>wget_return_codes[rv.returncode]<span class="sc">}</span><span class="ss"> See: </span><span class="sc">{</span>rv<span class="sc">.</span>stderr<span class="sc">}</span><span class="ss">'</span> )</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="cors_get_station_plots_url" class="level3">
<h3 class="anchored" data-anchor-id="cors_get_station_plots_url">CORS_get_station_plots_url</h3>
<blockquote class="blockquote">
<pre><code> CORS_get_station_plots_url (station_list)</code></pre>
</blockquote>
<p>This function takes a list of station names as an argument and returns a list of URLs for the corresponding station plot files.</p>
<p>Parameters: station_list (list): A list of station names.</p>
<p>Returns: lst (list): A list of URLs for the corresponding station plot files.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>station_list</td>
<td>Python <code>list</code> of CORS Stations.</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Testing: CORS_get_station_plots_url()'</span>)</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>station_list  <span class="op">=</span> [<span class="st">'ncdu'</span>, <span class="st">'ncbe'</span>, <span class="st">'NCRT'</span>, <span class="st">'loy2'</span>]</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> CORS_get_station_plots_url( station_list )</span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>display(rv)</span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="down_load_cors_plots" class="level3">
<h3 class="anchored" data-anchor-id="down_load_cors_plots">down_load_cors_plots</h3>
<blockquote class="blockquote">
<pre><code> down_load_cors_plots (dir:str, station_list:list)</code></pre>
</blockquote>
<p>This function downloads the plots of the CORS stations from the NGS website.</p>
<p>Parameters: dir (str): The directory where the files will be downloaded. station_list (list): A list of CORS station names.</p>
<p>Returns: rv (list): A list of the downloaded files.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dir</td>
<td>str</td>
<td>Existing folder to place the file.</td>
</tr>
<tr class="even">
<td>station_list</td>
<td>list</td>
<td>Python <code>list</code> of CORS Stations.</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Testing: down_load_cors_plots_coords()'</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>station_list  <span class="op">=</span> [<span class="st">'ncdu'</span>, <span class="st">'ncbe'</span>, <span class="st">'NCRT'</span>, <span class="st">'loy2'</span>]</span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>local_test_folder <span class="op">=</span> test_folder</span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> down_load_cors_plots( local_test_folder, station_list )</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>wget_return_codes[rv.returncode]<span class="sc">}</span><span class="ss"> See: </span><span class="sc">{</span>rv<span class="sc">.</span>stderr<span class="sc">}</span><span class="ss">'</span> )</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="cors_get_station_coords_url" class="level3">
<h3 class="anchored" data-anchor-id="cors_get_station_coords_url">CORS_get_station_coords_url</h3>
<blockquote class="blockquote">
<pre><code> CORS_get_station_coords_url (station_list:list)</code></pre>
</blockquote>
<p>This function takes a list of station names as an argument and returns a list of URLs for the corresponding station coordinates files.</p>
<p>Parameters: station_list (list): A list of station names.</p>
<p>Returns: lst (list): A list of URLs for the corresponding station coordinates files.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>station_list</td>
<td>list</td>
<td>Python <code>list</code> of CORS Stations.</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td><strong>List of coordinates urls</strong></td>
</tr>
</tbody>
</table>
<p>Example usage:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Testing: CORS_get_station_coords_url()'</span>)</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>station_list  <span class="op">=</span> [<span class="st">'ncdu'</span>, <span class="st">'ncbe'</span>, <span class="st">'NCRT'</span>, <span class="st">'loy2'</span>]</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> CORS_get_station_coords_url( station_list )</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>display(rv)</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="down_load_cors_station_coords" class="level3">
<h3 class="anchored" data-anchor-id="down_load_cors_station_coords">down_load_cors_station_coords</h3>
<blockquote class="blockquote">
<pre><code> down_load_cors_station_coords (dir:str, station_list:list)</code></pre>
</blockquote>
<p>This function downloads the coordinates of the CORS stations from the NGS website.</p>
<p>Parameters: dir (str): The directory where the files will be downloaded. station_list (list): A list of CORS station names.</p>
<p>Returns: rv (list): A list of the downloaded files.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>dir</td>
<td>str</td>
<td>Existing folder to place the file.</td>
</tr>
<tr class="even">
<td>station_list</td>
<td>list</td>
<td>Python <code>list</code> of CORS Stations.</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Testing: down_load_cors_station_coords()'</span>)</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a>station_list  <span class="op">=</span> [<span class="st">'ncdu'</span>, <span class="st">'ncbe'</span>, <span class="st">'NCRT'</span>, <span class="st">'loy2'</span>]</span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>local_test_folder <span class="op">=</span> test_folder</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>rv <span class="op">=</span> down_load_cors_station_coords( local_test_folder, station_list )</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f'</span><span class="sc">{</span>wget_return_codes[rv.returncode]<span class="sc">}</span><span class="ss"> See: </span><span class="sc">{</span>rv<span class="sc">.</span>stderr<span class="sc">}</span><span class="ss">'</span> )</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">'Done.'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<hr>
</section>
<section id="clean_up_cors" class="level3">
<h3 class="anchored" data-anchor-id="clean_up_cors">clean_up_CORS</h3>
<blockquote class="blockquote">
<pre><code> clean_up_CORS (rdir:str, date:str)</code></pre>
</blockquote>
<p>clean_up_CORS(rdir, date) Inputs: rdir Directory to start the find command in. date The date of the CORS files to cleanup.</p>
<p>Outputs: Removes unnecessary files. Returns: None.</p>
<p>Uses the Linux ‘find’ command to locate and remove unnecessary files from within a CORS station directory.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>rdir</td>
<td>str</td>
<td>Directory start in.</td>
</tr>
<tr class="even">
<td>date</td>
<td>str</td>
<td>Date of files to clean up.</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="down_load_list_of_obs_files" class="level3">
<h3 class="anchored" data-anchor-id="down_load_list_of_obs_files">down_load_list_of_obs_files</h3>
<blockquote class="blockquote">
<pre><code> down_load_list_of_obs_files (folder='./', date='', station_list=[])</code></pre>
</blockquote>
<p>This function downloads a list of observation files from a given URL for a given date and station list.</p>
<p>Parameters: folder (str): The folder where the files should be downloaded. date (str): The date for which the files should be downloaded. station_list (list): A list of stations for which the files should be downloaded.</p>
<p>Returns: rv (list): A list of the downloaded files.</p>
<table class="table">
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>folder</td>
<td>str</td>
<td>./</td>
<td>Existing folder to store downloaded CORS data.</td>
</tr>
<tr class="even">
<td>date</td>
<td>str</td>
<td></td>
<td>Date to download. Format: ‘YYYY:MM:DD’</td>
</tr>
<tr class="odd">
<td>station_list</td>
<td>list</td>
<td>[]</td>
<td>List of CORS station identifiers.</td>
</tr>
</tbody>
</table>
<hr>
</section>
<section id="down_load_cors_data" class="level3">
<h3 class="anchored" data-anchor-id="down_load_cors_data">down_load_cors_data</h3>
<blockquote class="blockquote">
<pre><code> down_load_cors_data (folder:str='/tmp', date:str='',
                      progress_callback=None, station_list:list=[])</code></pre>
</blockquote>
<p>Download CORS RINEX data for the designated <code>date</code>, specified identifiers in the <code>station_list</code>, and store the data in the given <code>folder</code>.</p>
<table class="table">
<colgroup>
<col style="width: 6%">
<col style="width: 25%">
<col style="width: 34%">
<col style="width: 34%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Default</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>folder</td>
<td>str</td>
<td>/tmp</td>
<td>Existing folder to store downloaded CORS data.</td>
</tr>
<tr class="even">
<td>date</td>
<td>str</td>
<td></td>
<td>Date to download. Format: ‘YYYY:MM:DD’</td>
</tr>
<tr class="odd">
<td>progress_callback</td>
<td>NoneType</td>
<td>None</td>
<td>User defined function to report progress</td>
</tr>
<tr class="even">
<td>station_list</td>
<td>list</td>
<td>[]</td>
<td>List of CORS station identifiers.</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>list</strong></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>